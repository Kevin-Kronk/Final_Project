[
  {
    "objectID": "EDA.html",
    "href": "EDA.html",
    "title": "ST 558 Final Project EDA",
    "section": "",
    "text": "The Diabetes Health Indicators Dataset is from the BRFSS 2015 dataset on Kaggle. It is the Behavioral Risk Factor Surveillance System, which is a telephone survey collected annually by the CDC. Diabetes is a chronic disease that is prevelant in the United States, has a strongly negative impact on those with it, and has a major negative impact on the economy. Early diagnosis of the disease can allow individuals to make lifestyle changes and seek treatment, therefore it is important to build a model that can accurately predict it.\nThe focus of my project will be on how lifestyle and basic health variables impact whether or not someone has diabetes and if we are able to predict having diabetes based on these variables. The EDA will be used to explore these variables to look at their frequencies and distributions, as well as see how they relate to the response variable Diabetes_binary which expresses whether the person has diabetes or not. Modeling will be done to determine which model is best able to predict someone having diabetes based on which has the lowest log-loss.\n\n\nDiabetes_binary - binary variable where 0 is no diabetes and 1 is for prediabetes or diabetes.\nHighBP - binary variable where 0 is not high and 1 is high blood pressure.\nSmoker - binary variable asking if the person has smoked at least 100 cigarettes (5 packs) in their entire life, where 0 is for no and 1 for yes.\nPhysActivity - binary variable for if they’ve done physical activity in the past 30 days, not including their job, where 0 is no and 1 is yes.\nFruits - binary variable for if they consume 1 or more fruit per day, where 0 is no and 1 is yes.\nVeggies - binary variable for if they consume 1 or more vegetable per day, where 0 is no and 1 is yes.\nHvyAlcoholConsump - binary variable for if men have &gt;= 14 drinks or women &gt;= 7 drinks per week, where 0 is no and 1 is yes.\nGenHlth - ordinal categorical variable describing their general health, where 1 is excellent, 2 is very good, 3 is good, 4 is fair, and 5 is poor.\nDiffWalk - binary variable for if they have serious difficulty walking or climbing stairs, where 0 is no and 1 is yes.\nSex - binary variable where 0 is female and 1 is male.\nAge - numerical variable from 1 to 13 representing different age categories where 1 is 18-24, 9 is 60-64, and 13 is 80 or older.\nIncome - numerical variable representing different income categories where 1 is less than $10,000, 5 is less than $35,000, and 8 is $75,000 or more.\n\n\n\n\n# Load in libraries\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.2.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\n\n# Load in Diabetes Health Indicators Dataset\ndiabetes_data &lt;- read_csv(\"diabetes_binary_health_indicators_BRFSS2015.csv\")\n\nRows: 253680 Columns: 22\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (22): Diabetes_binary, HighBP, HighChol, CholCheck, BMI, Smoker, Stroke,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# Select only the variables used for my analysis and convert binary to factor\nanalysis_variables &lt;- c(\"Diabetes_binary\", \"HighBP\", \"Smoker\", \"PhysActivity\",\n                        \"Fruits\", \"Veggies\", \"HvyAlcoholConsump\", \"GenHlth\",\n                        \"DiffWalk\", \"Sex\", \"Age\", \"Income\")\ndiabetes_data &lt;- diabetes_data |&gt;\n  select(all_of(analysis_variables)) |&gt;\n  mutate(Diabetes_binary = factor(Diabetes_binary),\n         HighBP = factor(HighBP),\n         Smoker = factor(Smoker),\n         PhysActivity = factor(PhysActivity),\n         Fruits = factor(Fruits), \n         Veggies = factor(Veggies),\n         HvyAlcoholConsump = factor(HvyAlcoholConsump),\n         DiffWalk = factor(DiffWalk),\n         Sex = factor(Sex))\n\ndiabetes_data\n\n# A tibble: 253,680 × 12\n   Diabetes_binary HighBP Smoker PhysActivity Fruits Veggies HvyAlcoholConsump\n   &lt;fct&gt;           &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt;        &lt;fct&gt;  &lt;fct&gt;   &lt;fct&gt;            \n 1 0               1      1      0            0      1       0                \n 2 0               0      1      1            0      0       0                \n 3 0               1      0      0            1      0       0                \n 4 0               1      0      1            1      1       0                \n 5 0               1      0      1            1      1       0                \n 6 0               1      1      1            1      1       0                \n 7 0               1      1      0            0      0       0                \n 8 0               1      1      1            0      1       0                \n 9 1               1      1      0            1      1       0                \n10 0               0      0      0            0      1       0                \n# ℹ 253,670 more rows\n# ℹ 5 more variables: GenHlth &lt;dbl&gt;, DiffWalk &lt;fct&gt;, Sex &lt;fct&gt;, Age &lt;dbl&gt;,\n#   Income &lt;dbl&gt;\n\n\n\n\n\n\nstr(diabetes_data)\n\ntibble [253,680 × 12] (S3: tbl_df/tbl/data.frame)\n $ Diabetes_binary  : Factor w/ 2 levels \"0\",\"1\": 1 1 1 1 1 1 1 1 2 1 ...\n $ HighBP           : Factor w/ 2 levels \"0\",\"1\": 2 1 2 2 2 2 2 2 2 1 ...\n $ Smoker           : Factor w/ 2 levels \"0\",\"1\": 2 2 1 1 1 2 2 2 2 1 ...\n $ PhysActivity     : Factor w/ 2 levels \"0\",\"1\": 1 2 1 2 2 2 1 2 1 1 ...\n $ Fruits           : Factor w/ 2 levels \"0\",\"1\": 1 1 2 2 2 2 1 1 2 1 ...\n $ Veggies          : Factor w/ 2 levels \"0\",\"1\": 2 1 1 2 2 2 1 2 2 2 ...\n $ HvyAlcoholConsump: Factor w/ 2 levels \"0\",\"1\": 1 1 1 1 1 1 1 1 1 1 ...\n $ GenHlth          : num [1:253680] 5 3 5 2 2 2 3 3 5 2 ...\n $ DiffWalk         : Factor w/ 2 levels \"0\",\"1\": 2 1 2 1 1 1 1 2 2 1 ...\n $ Sex              : Factor w/ 2 levels \"0\",\"1\": 1 1 1 1 1 2 1 1 1 2 ...\n $ Age              : num [1:253680] 9 7 9 11 11 10 9 11 9 8 ...\n $ Income           : num [1:253680] 3 1 8 6 4 8 7 4 1 3 ...\n\n\nThere are 253,680 observations with 1 response variable and 11 predictor variables.\n\n\n\n\n# Check for missing values\ncolSums(is.na(diabetes_data))\n\n  Diabetes_binary            HighBP            Smoker      PhysActivity \n                0                 0                 0                 0 \n           Fruits           Veggies HvyAlcoholConsump           GenHlth \n                0                 0                 0                 0 \n         DiffWalk               Sex               Age            Income \n                0                 0                 0                 0 \n\n\nThere are no missing values for these variables.\n\n\n\n\n# Get the counts of the Diabetes_binary values\ndiabetes_data |&gt;\n  group_by(Diabetes_binary) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  Diabetes_binary  count\n  &lt;fct&gt;            &lt;int&gt;\n1 0               218334\n2 1                35346\n\n\n\n# Plot of Diabetes_binary\nggplot(diabetes_data, aes(Diabetes_binary, fill = Diabetes_binary)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the HighBP values\ndiabetes_data |&gt;\n  group_by(HighBP) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  HighBP  count\n  &lt;fct&gt;   &lt;int&gt;\n1 0      144851\n2 1      108829\n\n\n\n# Plot of HighBP\nggplot(diabetes_data, aes(HighBP, fill = HighBP)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of HighBP by Diabetes_binary\nggplot(diabetes_data, aes(HighBP, fill = HighBP)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the Smoker values\ndiabetes_data |&gt;\n  group_by(Smoker) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  Smoker  count\n  &lt;fct&gt;   &lt;int&gt;\n1 0      141257\n2 1      112423\n\n\n\n# Plot of Smoker\nggplot(diabetes_data, aes(Smoker, fill = Smoker)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Smoker by Diabetes_binary\nggplot(diabetes_data, aes(Smoker, fill = Smoker)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the PhysActivity values\ndiabetes_data |&gt;\n  group_by(PhysActivity) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  PhysActivity  count\n  &lt;fct&gt;         &lt;int&gt;\n1 0             61760\n2 1            191920\n\n\n\n# Plot of PhysActivity\nggplot(diabetes_data, aes(PhysActivity, fill = PhysActivity)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of PhysActivity by Diabetes_binary\nggplot(diabetes_data, aes(PhysActivity, fill = PhysActivity)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the Fruits values\ndiabetes_data |&gt;\n  group_by(Fruits) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  Fruits  count\n  &lt;fct&gt;   &lt;int&gt;\n1 0       92782\n2 1      160898\n\n\n\n# Plot of Fruits\nggplot(diabetes_data, aes(Fruits, fill = Fruits)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Fruits by Diabetes_binary\nggplot(diabetes_data, aes(Fruits, fill = Fruits)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the Veggies values\ndiabetes_data |&gt;\n  group_by(Veggies) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  Veggies  count\n  &lt;fct&gt;    &lt;int&gt;\n1 0        47839\n2 1       205841\n\n\n\n# Plot of Veggies\nggplot(diabetes_data, aes(Veggies, fill = Veggies)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Veggies by Diabetes_binary\nggplot(diabetes_data, aes(Veggies, fill = Veggies)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the HvyAlcoholConsump values\ndiabetes_data |&gt;\n  group_by(HvyAlcoholConsump) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  HvyAlcoholConsump  count\n  &lt;fct&gt;              &lt;int&gt;\n1 0                 239424\n2 1                  14256\n\n\n\n# Plot of HvyAlcoholConsump\nggplot(diabetes_data, aes(HvyAlcoholConsump, fill = HvyAlcoholConsump)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of HvyAlcoholConsump by Diabetes_binary\nggplot(diabetes_data, aes(HvyAlcoholConsump, fill = HvyAlcoholConsump)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the GenHlth values\ndiabetes_data |&gt;\n  group_by(GenHlth) |&gt;\n  summarize(count = n())\n\n# A tibble: 5 × 2\n  GenHlth count\n    &lt;dbl&gt; &lt;int&gt;\n1       1 45299\n2       2 89084\n3       3 75646\n4       4 31570\n5       5 12081\n\n\n\n# Get the summary statistics of GenHlth\nsummary(diabetes_data$GenHlth)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.000   2.000   2.000   2.511   3.000   5.000 \n\n\n\n# Plot of GenHlth\nggplot(diabetes_data, aes(GenHlth, fill = factor(GenHlth))) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of GenHlth by Diabetes_binary\nggplot(diabetes_data, aes(GenHlth, fill = factor(GenHlth))) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the DiffWalk values\ndiabetes_data |&gt;\n  group_by(DiffWalk) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  DiffWalk  count\n  &lt;fct&gt;     &lt;int&gt;\n1 0        211005\n2 1         42675\n\n\n\n# Plot of DiffWalk\nggplot(diabetes_data, aes(DiffWalk, fill = DiffWalk)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of DiffWalk by Diabetes_binary\nggplot(diabetes_data, aes(DiffWalk, fill = factor(DiffWalk))) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the Sex values\ndiabetes_data |&gt;\n  group_by(Sex) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  Sex    count\n  &lt;fct&gt;  &lt;int&gt;\n1 0     141974\n2 1     111706\n\n\n\n# Plot of Sex\nggplot(diabetes_data, aes(Sex, fill = Sex)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Sex by Diabetes_binary\nggplot(diabetes_data, aes(Sex, fill = factor(Sex))) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the summary statistics of Age\nsummary(diabetes_data$Age)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.000   6.000   8.000   8.032  10.000  13.000 \n\n\n\n# Plot of Age\nggplot(diabetes_data, aes(Age, fill = factor(Age))) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Age by Diabetes_binary\nggplot(diabetes_data, aes(Age, fill = factor(Age))) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the summary statistics of Income\nsummary(diabetes_data$Income)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.000   5.000   7.000   6.054   8.000   8.000 \n\n\n\n# Plot of Income\nggplot(diabetes_data, aes(Income, fill = factor(Income))) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Income by Diabetes_binary\nggplot(diabetes_data, aes(Income, fill = factor(Income))) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\nClick here for the Modeling Page"
  },
  {
    "objectID": "EDA.html#eda",
    "href": "EDA.html#eda",
    "title": "ST 558 Final Project EDA",
    "section": "",
    "text": "Click here for the Modeling Page"
  },
  {
    "objectID": "EDA.html#diabetes-health-indicators-dataset",
    "href": "EDA.html#diabetes-health-indicators-dataset",
    "title": "ST 558 Final Project EDA",
    "section": "",
    "text": "The Diabetes Health Indicators Dataset is from the BRFSS 2015 dataset on Kaggle. It is the Behavioral Risk Factor Surveillance System, which is a telephone survey collected annually by the CDC. Diabetes is a chronic disease that is prevelant in the United States, has a strongly negative impact on those with it, and has a major negative impact on the economy. Early diagnosis of the disease can allow individuals to make lifestyle changes and seek treatment, therefore it is important to build a model that can accurately predict it.\nThe focus of my project will be on how lifestyle and basic health variables impact whether or not someone has diabetes and if we are able to predict having diabetes based on these variables. The EDA will be used to explore these variables to look at their frequencies and distributions, as well as see how they relate to the response variable Diabetes_binary which expresses whether the person has diabetes or not. Modeling will be done to determine which model is best able to predict someone having diabetes based on which has the lowest log-loss.\n\n\nDiabetes_binary - binary variable where 0 is no diabetes and 1 is for prediabetes or diabetes.\nHighBP - binary variable where 0 is not high and 1 is high blood pressure.\nSmoker - binary variable asking if the person has smoked at least 100 cigarettes (5 packs) in their entire life, where 0 is for no and 1 for yes.\nPhysActivity - binary variable for if they’ve done physical activity in the past 30 days, not including their job, where 0 is no and 1 is yes.\nFruits - binary variable for if they consume 1 or more fruit per day, where 0 is no and 1 is yes.\nVeggies - binary variable for if they consume 1 or more vegetable per day, where 0 is no and 1 is yes.\nHvyAlcoholConsump - binary variable for if men have &gt;= 14 drinks or women &gt;= 7 drinks per week, where 0 is no and 1 is yes.\nGenHlth - ordinal categorical variable describing their general health, where 1 is excellent, 2 is very good, 3 is good, 4 is fair, and 5 is poor.\nDiffWalk - binary variable for if they have serious difficulty walking or climbing stairs, where 0 is no and 1 is yes.\nSex - binary variable where 0 is female and 1 is male.\nAge - numerical variable from 1 to 13 representing different age categories where 1 is 18-24, 9 is 60-64, and 13 is 80 or older.\nIncome - numerical variable representing different income categories where 1 is less than $10,000, 5 is less than $35,000, and 8 is $75,000 or more.\n\n\n\n\n# Load in libraries\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.2.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\n\n# Load in Diabetes Health Indicators Dataset\ndiabetes_data &lt;- read_csv(\"diabetes_binary_health_indicators_BRFSS2015.csv\")\n\nRows: 253680 Columns: 22\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (22): Diabetes_binary, HighBP, HighChol, CholCheck, BMI, Smoker, Stroke,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# Select only the variables used for my analysis and convert binary to factor\nanalysis_variables &lt;- c(\"Diabetes_binary\", \"HighBP\", \"Smoker\", \"PhysActivity\",\n                        \"Fruits\", \"Veggies\", \"HvyAlcoholConsump\", \"GenHlth\",\n                        \"DiffWalk\", \"Sex\", \"Age\", \"Income\")\ndiabetes_data &lt;- diabetes_data |&gt;\n  select(all_of(analysis_variables)) |&gt;\n  mutate(Diabetes_binary = factor(Diabetes_binary),\n         HighBP = factor(HighBP),\n         Smoker = factor(Smoker),\n         PhysActivity = factor(PhysActivity),\n         Fruits = factor(Fruits), \n         Veggies = factor(Veggies),\n         HvyAlcoholConsump = factor(HvyAlcoholConsump),\n         DiffWalk = factor(DiffWalk),\n         Sex = factor(Sex))\n\ndiabetes_data\n\n# A tibble: 253,680 × 12\n   Diabetes_binary HighBP Smoker PhysActivity Fruits Veggies HvyAlcoholConsump\n   &lt;fct&gt;           &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt;        &lt;fct&gt;  &lt;fct&gt;   &lt;fct&gt;            \n 1 0               1      1      0            0      1       0                \n 2 0               0      1      1            0      0       0                \n 3 0               1      0      0            1      0       0                \n 4 0               1      0      1            1      1       0                \n 5 0               1      0      1            1      1       0                \n 6 0               1      1      1            1      1       0                \n 7 0               1      1      0            0      0       0                \n 8 0               1      1      1            0      1       0                \n 9 1               1      1      0            1      1       0                \n10 0               0      0      0            0      1       0                \n# ℹ 253,670 more rows\n# ℹ 5 more variables: GenHlth &lt;dbl&gt;, DiffWalk &lt;fct&gt;, Sex &lt;fct&gt;, Age &lt;dbl&gt;,\n#   Income &lt;dbl&gt;\n\n\n\n\n\n\nstr(diabetes_data)\n\ntibble [253,680 × 12] (S3: tbl_df/tbl/data.frame)\n $ Diabetes_binary  : Factor w/ 2 levels \"0\",\"1\": 1 1 1 1 1 1 1 1 2 1 ...\n $ HighBP           : Factor w/ 2 levels \"0\",\"1\": 2 1 2 2 2 2 2 2 2 1 ...\n $ Smoker           : Factor w/ 2 levels \"0\",\"1\": 2 2 1 1 1 2 2 2 2 1 ...\n $ PhysActivity     : Factor w/ 2 levels \"0\",\"1\": 1 2 1 2 2 2 1 2 1 1 ...\n $ Fruits           : Factor w/ 2 levels \"0\",\"1\": 1 1 2 2 2 2 1 1 2 1 ...\n $ Veggies          : Factor w/ 2 levels \"0\",\"1\": 2 1 1 2 2 2 1 2 2 2 ...\n $ HvyAlcoholConsump: Factor w/ 2 levels \"0\",\"1\": 1 1 1 1 1 1 1 1 1 1 ...\n $ GenHlth          : num [1:253680] 5 3 5 2 2 2 3 3 5 2 ...\n $ DiffWalk         : Factor w/ 2 levels \"0\",\"1\": 2 1 2 1 1 1 1 2 2 1 ...\n $ Sex              : Factor w/ 2 levels \"0\",\"1\": 1 1 1 1 1 2 1 1 1 2 ...\n $ Age              : num [1:253680] 9 7 9 11 11 10 9 11 9 8 ...\n $ Income           : num [1:253680] 3 1 8 6 4 8 7 4 1 3 ...\n\n\nThere are 253,680 observations with 1 response variable and 11 predictor variables.\n\n\n\n\n# Check for missing values\ncolSums(is.na(diabetes_data))\n\n  Diabetes_binary            HighBP            Smoker      PhysActivity \n                0                 0                 0                 0 \n           Fruits           Veggies HvyAlcoholConsump           GenHlth \n                0                 0                 0                 0 \n         DiffWalk               Sex               Age            Income \n                0                 0                 0                 0 \n\n\nThere are no missing values for these variables.\n\n\n\n\n# Get the counts of the Diabetes_binary values\ndiabetes_data |&gt;\n  group_by(Diabetes_binary) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  Diabetes_binary  count\n  &lt;fct&gt;            &lt;int&gt;\n1 0               218334\n2 1                35346\n\n\n\n# Plot of Diabetes_binary\nggplot(diabetes_data, aes(Diabetes_binary, fill = Diabetes_binary)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the HighBP values\ndiabetes_data |&gt;\n  group_by(HighBP) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  HighBP  count\n  &lt;fct&gt;   &lt;int&gt;\n1 0      144851\n2 1      108829\n\n\n\n# Plot of HighBP\nggplot(diabetes_data, aes(HighBP, fill = HighBP)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of HighBP by Diabetes_binary\nggplot(diabetes_data, aes(HighBP, fill = HighBP)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the Smoker values\ndiabetes_data |&gt;\n  group_by(Smoker) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  Smoker  count\n  &lt;fct&gt;   &lt;int&gt;\n1 0      141257\n2 1      112423\n\n\n\n# Plot of Smoker\nggplot(diabetes_data, aes(Smoker, fill = Smoker)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Smoker by Diabetes_binary\nggplot(diabetes_data, aes(Smoker, fill = Smoker)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the PhysActivity values\ndiabetes_data |&gt;\n  group_by(PhysActivity) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  PhysActivity  count\n  &lt;fct&gt;         &lt;int&gt;\n1 0             61760\n2 1            191920\n\n\n\n# Plot of PhysActivity\nggplot(diabetes_data, aes(PhysActivity, fill = PhysActivity)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of PhysActivity by Diabetes_binary\nggplot(diabetes_data, aes(PhysActivity, fill = PhysActivity)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the Fruits values\ndiabetes_data |&gt;\n  group_by(Fruits) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  Fruits  count\n  &lt;fct&gt;   &lt;int&gt;\n1 0       92782\n2 1      160898\n\n\n\n# Plot of Fruits\nggplot(diabetes_data, aes(Fruits, fill = Fruits)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Fruits by Diabetes_binary\nggplot(diabetes_data, aes(Fruits, fill = Fruits)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the Veggies values\ndiabetes_data |&gt;\n  group_by(Veggies) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  Veggies  count\n  &lt;fct&gt;    &lt;int&gt;\n1 0        47839\n2 1       205841\n\n\n\n# Plot of Veggies\nggplot(diabetes_data, aes(Veggies, fill = Veggies)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Veggies by Diabetes_binary\nggplot(diabetes_data, aes(Veggies, fill = Veggies)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the HvyAlcoholConsump values\ndiabetes_data |&gt;\n  group_by(HvyAlcoholConsump) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  HvyAlcoholConsump  count\n  &lt;fct&gt;              &lt;int&gt;\n1 0                 239424\n2 1                  14256\n\n\n\n# Plot of HvyAlcoholConsump\nggplot(diabetes_data, aes(HvyAlcoholConsump, fill = HvyAlcoholConsump)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of HvyAlcoholConsump by Diabetes_binary\nggplot(diabetes_data, aes(HvyAlcoholConsump, fill = HvyAlcoholConsump)) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the GenHlth values\ndiabetes_data |&gt;\n  group_by(GenHlth) |&gt;\n  summarize(count = n())\n\n# A tibble: 5 × 2\n  GenHlth count\n    &lt;dbl&gt; &lt;int&gt;\n1       1 45299\n2       2 89084\n3       3 75646\n4       4 31570\n5       5 12081\n\n\n\n# Get the summary statistics of GenHlth\nsummary(diabetes_data$GenHlth)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.000   2.000   2.000   2.511   3.000   5.000 \n\n\n\n# Plot of GenHlth\nggplot(diabetes_data, aes(GenHlth, fill = factor(GenHlth))) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of GenHlth by Diabetes_binary\nggplot(diabetes_data, aes(GenHlth, fill = factor(GenHlth))) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the DiffWalk values\ndiabetes_data |&gt;\n  group_by(DiffWalk) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  DiffWalk  count\n  &lt;fct&gt;     &lt;int&gt;\n1 0        211005\n2 1         42675\n\n\n\n# Plot of DiffWalk\nggplot(diabetes_data, aes(DiffWalk, fill = DiffWalk)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of DiffWalk by Diabetes_binary\nggplot(diabetes_data, aes(DiffWalk, fill = factor(DiffWalk))) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the counts of the Sex values\ndiabetes_data |&gt;\n  group_by(Sex) |&gt;\n  summarize(count = n())\n\n# A tibble: 2 × 2\n  Sex    count\n  &lt;fct&gt;  &lt;int&gt;\n1 0     141974\n2 1     111706\n\n\n\n# Plot of Sex\nggplot(diabetes_data, aes(Sex, fill = Sex)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Sex by Diabetes_binary\nggplot(diabetes_data, aes(Sex, fill = factor(Sex))) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the summary statistics of Age\nsummary(diabetes_data$Age)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.000   6.000   8.000   8.032  10.000  13.000 \n\n\n\n# Plot of Age\nggplot(diabetes_data, aes(Age, fill = factor(Age))) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Age by Diabetes_binary\nggplot(diabetes_data, aes(Age, fill = factor(Age))) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\n\n\n\n\n# Get the summary statistics of Income\nsummary(diabetes_data$Income)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.000   5.000   7.000   6.054   8.000   8.000 \n\n\n\n# Plot of Income\nggplot(diabetes_data, aes(Income, fill = factor(Income))) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n# Plot of Income by Diabetes_binary\nggplot(diabetes_data, aes(Income, fill = factor(Income))) +\n  geom_bar() +\n  facet_wrap(~ Diabetes_binary)\n\n\n\n\n\n\n\n\nClick here for the Modeling Page"
  },
  {
    "objectID": "Modeling.html",
    "href": "Modeling.html",
    "title": "ST 558 Final Project Modeling",
    "section": "",
    "text": "# Load in libraries\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.2.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(tidymodels)\n\n── Attaching packages ────────────────────────────────────── tidymodels 1.4.1 ──\n✔ broom        1.0.10     ✔ rsample      1.3.1 \n✔ dials        1.4.2      ✔ tailor       0.1.0 \n✔ infer        1.0.9      ✔ tune         2.0.1 \n✔ modeldata    1.5.1      ✔ workflows    1.3.0 \n✔ parsnip      1.3.3      ✔ workflowsets 1.1.1 \n✔ recipes      1.3.1      ✔ yardstick    1.3.2 \n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n\n\n\n# Load in Diabetes Health Indicators Dataset\ndiabetes_data &lt;- read_csv(\"diabetes_binary_health_indicators_BRFSS2015.csv\")\n\nRows: 253680 Columns: 22\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (22): Diabetes_binary, HighBP, HighChol, CholCheck, BMI, Smoker, Stroke,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# Select only the variables used for my analysis and convert binary to factor\nanalysis_variables &lt;- c(\"Diabetes_binary\", \"HighBP\", \"Smoker\", \"PhysActivity\",\n                        \"Fruits\", \"Veggies\", \"HvyAlcoholConsump\", \"GenHlth\",\n                        \"DiffWalk\", \"Sex\", \"Age\", \"Income\")\ndiabetes_data &lt;- diabetes_data |&gt;\n  select(all_of(analysis_variables)) |&gt;\n  mutate(Diabetes_binary = factor(Diabetes_binary),\n         HighBP = factor(HighBP),\n         Smoker = factor(Smoker),\n         PhysActivity = factor(PhysActivity),\n         Fruits = factor(Fruits), \n         Veggies = factor(Veggies),\n         HvyAlcoholConsump = factor(HvyAlcoholConsump),\n         DiffWalk = factor(DiffWalk),\n         Sex = factor(Sex))\n\ndiabetes_data\n\n# A tibble: 253,680 × 12\n   Diabetes_binary HighBP Smoker PhysActivity Fruits Veggies HvyAlcoholConsump\n   &lt;fct&gt;           &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt;        &lt;fct&gt;  &lt;fct&gt;   &lt;fct&gt;            \n 1 0               1      1      0            0      1       0                \n 2 0               0      1      1            0      0       0                \n 3 0               1      0      0            1      0       0                \n 4 0               1      0      1            1      1       0                \n 5 0               1      0      1            1      1       0                \n 6 0               1      1      1            1      1       0                \n 7 0               1      1      0            0      0       0                \n 8 0               1      1      1            0      1       0                \n 9 1               1      1      0            1      1       0                \n10 0               0      0      0            0      1       0                \n# ℹ 253,670 more rows\n# ℹ 5 more variables: GenHlth &lt;dbl&gt;, DiffWalk &lt;fct&gt;, Sex &lt;fct&gt;, Age &lt;dbl&gt;,\n#   Income &lt;dbl&gt;\n\n\n\n\n\n\n# Set seed for reproducibility\nset.seed(123)\n\n# Get training split with 70% of the data, and test split with 30%\n# Stratified on the response variable Diabetes_binary\ndiabetes_split &lt;- initial_split(diabetes_data, prop = 0.7, \n                                strata = Diabetes_binary)\ndiabetes_train &lt;- training(diabetes_split)\ndiabetes_test &lt;- testing(diabetes_split)\n\n# Create 5 fold Cross Validation splits\ndiabetes_folds &lt;- vfold_cv(diabetes_train, v = 5)\n\n\n\n\n\n\n\ndiabetes_tree_rec &lt;- recipe(Diabetes_binary ~ ., data = diabetes_data) |&gt;\n  step_normalize(all_numeric())\n\n\ndiabetes_tree_mod &lt;- decision_tree(tree_depth = 30,\n                          min_n = 20,\n                          cost_complexity = tune()) |&gt;\n  set_engine(\"rpart\") |&gt;\n  set_mode(\"classification\")\n\n\ndiabetes_tree_wkf &lt;- workflow() |&gt;\n  add_recipe(diabetes_tree_rec) |&gt;\n  add_model(diabetes_tree_mod)\n\n\ndiabetes_tree_grid &lt;- grid_regular(cost_complexity(),\n                                   levels = 10)\ndiabetes_tree_fits &lt;- diabetes_tree_wkf |&gt;\n  tune_grid(resamples = diabetes_folds,\n            grid = diabetes_tree_grid,\n            metrics = metric_set(mn_log_loss))\n\ndiabetes_tree_fits |&gt;\n  collect_metrics() |&gt;\n  filter(.metric == \"mn_log_loss\") |&gt;\n  arrange(mean)\n\n# A tibble: 10 × 7\n   cost_complexity .metric     .estimator  mean     n std_err .config         \n             &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;           \n 1    0.0000000001 mn_log_loss binary     0.348     5 0.00301 pre0_mod01_post0\n 2    0.000000001  mn_log_loss binary     0.348     5 0.00301 pre0_mod02_post0\n 3    0.00000001   mn_log_loss binary     0.348     5 0.00301 pre0_mod03_post0\n 4    0.0000001    mn_log_loss binary     0.348     5 0.00301 pre0_mod04_post0\n 5    0.000001     mn_log_loss binary     0.348     5 0.00301 pre0_mod05_post0\n 6    0.00001      mn_log_loss binary     0.349     5 0.00321 pre0_mod06_post0\n 7    0.0001       mn_log_loss binary     0.359     5 0.00165 pre0_mod07_post0\n 8    0.001        mn_log_loss binary     0.404     5 0.00158 pre0_mod08_post0\n 9    0.01         mn_log_loss binary     0.404     5 0.00158 pre0_mod09_post0\n10    0.1          mn_log_loss binary     0.404     5 0.00158 pre0_mod10_post0\n\n\n\ndiabetes_tree_best_params &lt;- select_best(diabetes_tree_fits, \n                                         metric = \"mn_log_loss\")\n\ndiabetes_tree_best_params\n\n# A tibble: 1 × 2\n  cost_complexity .config         \n            &lt;dbl&gt; &lt;chr&gt;           \n1    0.0000000001 pre0_mod01_post0\n\n\n\ndiabetes_tree_final_wkf &lt;- diabetes_tree_wkf |&gt;\n  finalize_workflow(diabetes_tree_best_params)\n\ndiabetes_tree_final_fit &lt;- diabetes_tree_final_wkf |&gt;\n  last_fit(diabetes_split, metrics = metric_set(mn_log_loss))\n\ndiabetes_tree_final_fit |&gt;\n  collect_metrics()\n\n# A tibble: 1 × 4\n  .metric     .estimator .estimate .config        \n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          \n1 mn_log_loss binary         0.347 pre0_mod0_post0\n\n\n\n\n\n\ndiabetes_rf_rec &lt;- recipe(Diabetes_binary ~ HighBP + Smoker + PhysActivity + \n                            Fruits + Veggies + HvyAlcoholConsump + \n                            GenHlth + DiffWalk + Sex + Age + Income, \n                          data = diabetes_data) |&gt;\n  step_normalize(all_numeric())\n\n\ndiabetes_rf_mod &lt;- rand_forest(mtry = tune(),\n                               trees = 100) |&gt;\n  set_engine(\"ranger\", importance = \"impurity\") |&gt;\n  set_mode(\"classification\")\n\n\ndiabetes_rf_wkf &lt;- workflow() |&gt;\n  add_recipe(diabetes_rf_rec) |&gt;\n  add_model(diabetes_rf_mod)\n\n\ndiabetes_rf_grid &lt;- grid_regular(mtry(range = c(1, 11)),\n                                 levels = 5)\n\ndiabetes_rf_fit &lt;- diabetes_rf_wkf |&gt;\n  tune_grid(resamples = diabetes_folds,\n            grid = diabetes_rf_grid,\n            metrics = metric_set(mn_log_loss))\n\ndiabetes_rf_fit |&gt;\n  collect_metrics() |&gt;\n  filter(.metric == \"mn_log_loss\") |&gt;\n  arrange(mean)\n\n# A tibble: 5 × 7\n   mtry .metric     .estimator  mean     n std_err .config        \n  &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;          \n1     3 mn_log_loss binary     0.331     5 0.00117 pre0_mod2_post0\n2     6 mn_log_loss binary     0.349     5 0.00203 pre0_mod3_post0\n3     1 mn_log_loss binary     0.350     5 0.00118 pre0_mod1_post0\n4     8 mn_log_loss binary     0.373     5 0.00215 pre0_mod4_post0\n5    11 mn_log_loss binary     0.477     5 0.00371 pre0_mod5_post0\n\n\n\ndiabetes_rf_best_params &lt;- select_best(diabetes_rf_fit, metric = \"mn_log_loss\") \n\ndiabetes_rf_final_wkf &lt;- diabetes_rf_wkf |&gt;\n  finalize_workflow(diabetes_rf_best_params) \n\ndiabetes_rf_final_fit &lt;- diabetes_rf_final_wkf |&gt;\n  last_fit(diabetes_split, metrics = metric_set(mn_log_loss))\n\ndiabetes_rf_final_fit |&gt;\n  collect_metrics()\n\n# A tibble: 1 × 4\n  .metric     .estimator .estimate .config        \n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          \n1 mn_log_loss binary         0.329 pre0_mod0_post0\n\n\n\n\n\n\nrbind(\n  diabetes_tree_final_fit |&gt;\n    collect_metrics() |&gt;\n    mutate(Model = \"Tree\", .before = \".metric\"),\n  diabetes_rf_final_fit |&gt;\n    collect_metrics() |&gt;\n    mutate(Model = \"RF\", .before = \".metric\")\n)\n\n# A tibble: 2 × 5\n  Model .metric     .estimator .estimate .config        \n  &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          \n1 Tree  mn_log_loss binary         0.347 pre0_mod0_post0\n2 RF    mn_log_loss binary         0.329 pre0_mod0_post0\n\n\nFit the best model on the full data set.\n\ndiabetes_best_model &lt;- diabetes_rf_final_wkf |&gt;\n  fit(diabetes_data)\n\ndiabetes_best_model\n\n══ Workflow [trained] ══════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: rand_forest()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n1 Recipe Step\n\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\nRanger result\n\nCall:\n ranger::ranger(x = maybe_data_frame(x), y = y, mtry = min_cols(~3L,      x), num.trees = ~100, importance = ~\"impurity\", num.threads = 1,      verbose = FALSE, seed = sample.int(10^5, 1), probability = TRUE) \n\nType:                             Probability estimation \nNumber of trees:                  100 \nSample size:                      253680 \nNumber of independent variables:  11 \nMtry:                             3 \nTarget node size:                 10 \nVariable importance mode:         impurity \nSplitrule:                        gini \nOOB prediction error (Brier s.):  0.1021353 \n\n\n\ndiabetes_rf_final_model &lt;- extract_fit_engine(diabetes_best_model)\n\ndiabetes_rf_final_model$variable.importance |&gt;\n  enframe(name = \"Variable\", value = \"Importance\") |&gt;\n  arrange(Importance) |&gt;\n  mutate(Variable = factor(Variable, levels = Variable)) |&gt;\n  ggplot(aes(x = Importance, y = Variable)) +\n  geom_bar(stat = \"identity\")"
  },
  {
    "objectID": "Modeling.html#load-the-data",
    "href": "Modeling.html#load-the-data",
    "title": "ST 558 Final Project Modeling",
    "section": "",
    "text": "# Load in libraries\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.2.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(tidymodels)\n\n── Attaching packages ────────────────────────────────────── tidymodels 1.4.1 ──\n✔ broom        1.0.10     ✔ rsample      1.3.1 \n✔ dials        1.4.2      ✔ tailor       0.1.0 \n✔ infer        1.0.9      ✔ tune         2.0.1 \n✔ modeldata    1.5.1      ✔ workflows    1.3.0 \n✔ parsnip      1.3.3      ✔ workflowsets 1.1.1 \n✔ recipes      1.3.1      ✔ yardstick    1.3.2 \n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n\n\n\n# Load in Diabetes Health Indicators Dataset\ndiabetes_data &lt;- read_csv(\"diabetes_binary_health_indicators_BRFSS2015.csv\")\n\nRows: 253680 Columns: 22\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (22): Diabetes_binary, HighBP, HighChol, CholCheck, BMI, Smoker, Stroke,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# Select only the variables used for my analysis and convert binary to factor\nanalysis_variables &lt;- c(\"Diabetes_binary\", \"HighBP\", \"Smoker\", \"PhysActivity\",\n                        \"Fruits\", \"Veggies\", \"HvyAlcoholConsump\", \"GenHlth\",\n                        \"DiffWalk\", \"Sex\", \"Age\", \"Income\")\ndiabetes_data &lt;- diabetes_data |&gt;\n  select(all_of(analysis_variables)) |&gt;\n  mutate(Diabetes_binary = factor(Diabetes_binary),\n         HighBP = factor(HighBP),\n         Smoker = factor(Smoker),\n         PhysActivity = factor(PhysActivity),\n         Fruits = factor(Fruits), \n         Veggies = factor(Veggies),\n         HvyAlcoholConsump = factor(HvyAlcoholConsump),\n         DiffWalk = factor(DiffWalk),\n         Sex = factor(Sex))\n\ndiabetes_data\n\n# A tibble: 253,680 × 12\n   Diabetes_binary HighBP Smoker PhysActivity Fruits Veggies HvyAlcoholConsump\n   &lt;fct&gt;           &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt;        &lt;fct&gt;  &lt;fct&gt;   &lt;fct&gt;            \n 1 0               1      1      0            0      1       0                \n 2 0               0      1      1            0      0       0                \n 3 0               1      0      0            1      0       0                \n 4 0               1      0      1            1      1       0                \n 5 0               1      0      1            1      1       0                \n 6 0               1      1      1            1      1       0                \n 7 0               1      1      0            0      0       0                \n 8 0               1      1      1            0      1       0                \n 9 1               1      1      0            1      1       0                \n10 0               0      0      0            0      1       0                \n# ℹ 253,670 more rows\n# ℹ 5 more variables: GenHlth &lt;dbl&gt;, DiffWalk &lt;fct&gt;, Sex &lt;fct&gt;, Age &lt;dbl&gt;,\n#   Income &lt;dbl&gt;"
  },
  {
    "objectID": "Modeling.html#split-the-data",
    "href": "Modeling.html#split-the-data",
    "title": "ST 558 Final Project Modeling",
    "section": "",
    "text": "# Set seed for reproducibility\nset.seed(123)\n\n# Get training split with 70% of the data, and test split with 30%\n# Stratified on the response variable Diabetes_binary\ndiabetes_split &lt;- initial_split(diabetes_data, prop = 0.7, \n                                strata = Diabetes_binary)\ndiabetes_train &lt;- training(diabetes_split)\ndiabetes_test &lt;- testing(diabetes_split)\n\n# Create 5 fold Cross Validation splits\ndiabetes_folds &lt;- vfold_cv(diabetes_train, v = 5)"
  },
  {
    "objectID": "Modeling.html#create-models",
    "href": "Modeling.html#create-models",
    "title": "ST 558 Final Project Modeling",
    "section": "",
    "text": "diabetes_tree_rec &lt;- recipe(Diabetes_binary ~ ., data = diabetes_data) |&gt;\n  step_normalize(all_numeric())\n\n\ndiabetes_tree_mod &lt;- decision_tree(tree_depth = 30,\n                          min_n = 20,\n                          cost_complexity = tune()) |&gt;\n  set_engine(\"rpart\") |&gt;\n  set_mode(\"classification\")\n\n\ndiabetes_tree_wkf &lt;- workflow() |&gt;\n  add_recipe(diabetes_tree_rec) |&gt;\n  add_model(diabetes_tree_mod)\n\n\ndiabetes_tree_grid &lt;- grid_regular(cost_complexity(),\n                                   levels = 10)\ndiabetes_tree_fits &lt;- diabetes_tree_wkf |&gt;\n  tune_grid(resamples = diabetes_folds,\n            grid = diabetes_tree_grid,\n            metrics = metric_set(mn_log_loss))\n\ndiabetes_tree_fits |&gt;\n  collect_metrics() |&gt;\n  filter(.metric == \"mn_log_loss\") |&gt;\n  arrange(mean)\n\n# A tibble: 10 × 7\n   cost_complexity .metric     .estimator  mean     n std_err .config         \n             &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;           \n 1    0.0000000001 mn_log_loss binary     0.348     5 0.00301 pre0_mod01_post0\n 2    0.000000001  mn_log_loss binary     0.348     5 0.00301 pre0_mod02_post0\n 3    0.00000001   mn_log_loss binary     0.348     5 0.00301 pre0_mod03_post0\n 4    0.0000001    mn_log_loss binary     0.348     5 0.00301 pre0_mod04_post0\n 5    0.000001     mn_log_loss binary     0.348     5 0.00301 pre0_mod05_post0\n 6    0.00001      mn_log_loss binary     0.349     5 0.00321 pre0_mod06_post0\n 7    0.0001       mn_log_loss binary     0.359     5 0.00165 pre0_mod07_post0\n 8    0.001        mn_log_loss binary     0.404     5 0.00158 pre0_mod08_post0\n 9    0.01         mn_log_loss binary     0.404     5 0.00158 pre0_mod09_post0\n10    0.1          mn_log_loss binary     0.404     5 0.00158 pre0_mod10_post0\n\n\n\ndiabetes_tree_best_params &lt;- select_best(diabetes_tree_fits, \n                                         metric = \"mn_log_loss\")\n\ndiabetes_tree_best_params\n\n# A tibble: 1 × 2\n  cost_complexity .config         \n            &lt;dbl&gt; &lt;chr&gt;           \n1    0.0000000001 pre0_mod01_post0\n\n\n\ndiabetes_tree_final_wkf &lt;- diabetes_tree_wkf |&gt;\n  finalize_workflow(diabetes_tree_best_params)\n\ndiabetes_tree_final_fit &lt;- diabetes_tree_final_wkf |&gt;\n  last_fit(diabetes_split, metrics = metric_set(mn_log_loss))\n\ndiabetes_tree_final_fit |&gt;\n  collect_metrics()\n\n# A tibble: 1 × 4\n  .metric     .estimator .estimate .config        \n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          \n1 mn_log_loss binary         0.347 pre0_mod0_post0\n\n\n\n\n\n\ndiabetes_rf_rec &lt;- recipe(Diabetes_binary ~ HighBP + Smoker + PhysActivity + \n                            Fruits + Veggies + HvyAlcoholConsump + \n                            GenHlth + DiffWalk + Sex + Age + Income, \n                          data = diabetes_data) |&gt;\n  step_normalize(all_numeric())\n\n\ndiabetes_rf_mod &lt;- rand_forest(mtry = tune(),\n                               trees = 100) |&gt;\n  set_engine(\"ranger\", importance = \"impurity\") |&gt;\n  set_mode(\"classification\")\n\n\ndiabetes_rf_wkf &lt;- workflow() |&gt;\n  add_recipe(diabetes_rf_rec) |&gt;\n  add_model(diabetes_rf_mod)\n\n\ndiabetes_rf_grid &lt;- grid_regular(mtry(range = c(1, 11)),\n                                 levels = 5)\n\ndiabetes_rf_fit &lt;- diabetes_rf_wkf |&gt;\n  tune_grid(resamples = diabetes_folds,\n            grid = diabetes_rf_grid,\n            metrics = metric_set(mn_log_loss))\n\ndiabetes_rf_fit |&gt;\n  collect_metrics() |&gt;\n  filter(.metric == \"mn_log_loss\") |&gt;\n  arrange(mean)\n\n# A tibble: 5 × 7\n   mtry .metric     .estimator  mean     n std_err .config        \n  &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;          \n1     3 mn_log_loss binary     0.331     5 0.00117 pre0_mod2_post0\n2     6 mn_log_loss binary     0.349     5 0.00203 pre0_mod3_post0\n3     1 mn_log_loss binary     0.350     5 0.00118 pre0_mod1_post0\n4     8 mn_log_loss binary     0.373     5 0.00215 pre0_mod4_post0\n5    11 mn_log_loss binary     0.477     5 0.00371 pre0_mod5_post0\n\n\n\ndiabetes_rf_best_params &lt;- select_best(diabetes_rf_fit, metric = \"mn_log_loss\") \n\ndiabetes_rf_final_wkf &lt;- diabetes_rf_wkf |&gt;\n  finalize_workflow(diabetes_rf_best_params) \n\ndiabetes_rf_final_fit &lt;- diabetes_rf_final_wkf |&gt;\n  last_fit(diabetes_split, metrics = metric_set(mn_log_loss))\n\ndiabetes_rf_final_fit |&gt;\n  collect_metrics()\n\n# A tibble: 1 × 4\n  .metric     .estimator .estimate .config        \n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          \n1 mn_log_loss binary         0.329 pre0_mod0_post0\n\n\n\n\n\n\nrbind(\n  diabetes_tree_final_fit |&gt;\n    collect_metrics() |&gt;\n    mutate(Model = \"Tree\", .before = \".metric\"),\n  diabetes_rf_final_fit |&gt;\n    collect_metrics() |&gt;\n    mutate(Model = \"RF\", .before = \".metric\")\n)\n\n# A tibble: 2 × 5\n  Model .metric     .estimator .estimate .config        \n  &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          \n1 Tree  mn_log_loss binary         0.347 pre0_mod0_post0\n2 RF    mn_log_loss binary         0.329 pre0_mod0_post0\n\n\nFit the best model on the full data set.\n\ndiabetes_best_model &lt;- diabetes_rf_final_wkf |&gt;\n  fit(diabetes_data)\n\ndiabetes_best_model\n\n══ Workflow [trained] ══════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: rand_forest()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n1 Recipe Step\n\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\nRanger result\n\nCall:\n ranger::ranger(x = maybe_data_frame(x), y = y, mtry = min_cols(~3L,      x), num.trees = ~100, importance = ~\"impurity\", num.threads = 1,      verbose = FALSE, seed = sample.int(10^5, 1), probability = TRUE) \n\nType:                             Probability estimation \nNumber of trees:                  100 \nSample size:                      253680 \nNumber of independent variables:  11 \nMtry:                             3 \nTarget node size:                 10 \nVariable importance mode:         impurity \nSplitrule:                        gini \nOOB prediction error (Brier s.):  0.1021353 \n\n\n\ndiabetes_rf_final_model &lt;- extract_fit_engine(diabetes_best_model)\n\ndiabetes_rf_final_model$variable.importance |&gt;\n  enframe(name = \"Variable\", value = \"Importance\") |&gt;\n  arrange(Importance) |&gt;\n  mutate(Variable = factor(Variable, levels = Variable)) |&gt;\n  ggplot(aes(x = Importance, y = Variable)) +\n  geom_bar(stat = \"identity\")"
  }
]